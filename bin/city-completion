#/usr/bin/env bash

_city_completions () {
  for fullpath in `ls $ICTDIR/invisible_cities/cities/*.py`; do
    cityname=$(basename $fullpath)
    if [[ $cityname == *"test"* ]]; then continue; fi
    if [[ $cityname == *"components"* ]]; then continue; fi
    if [[ $cityname == "__"* ]]; then continue; fi
    if [[ $cityname == *"~" ]]; then continue; fi
    cityname=${cityname/.py/}
    COMPREPLY+=("$cityname")
  done
}

complete -F _city_completions city